defmodule Aoc2023.Day03Test do
  alias Aoc2023.Day03
  use ExUnit.Case, async: true

  test "part 1 sample works" do
    data = """
    467..114..
    ...*......
    ..35..633.
    ......#...
    617*......
    .....+.58.
    ..592.....
    ......755.
    ...$.*....
    .664.598..
    """

    assert Aoc2023.Day03.part1(data) == 4361
  end

  test "number where symbol is right next to it is counted" do
    data =
      [
        """
        *....
        .123.
        .....
        """,
        """
        .*...
        .123.
        .....
        """,
        """
        ..*..
        .123.
        .....
        """,
        """
        ...*.
        .123.
        .....
        """,
        """
        ....*
        .123.
        .....
        """,
        """
        .....
        *123.
        .....
        """,
        """
        .....
        .123*
        .....
        """,
        """
        .....
        .123.
        *....
        """,
        """
        .....
        .123.
        .*...
        """,
        """
        .....
        .123.
        ..*..
        """,
        """
        .....
        .123.
        ...*.
        """,
        """
        .....
        .123.
        ....*
        """
      ]

    Enum.each(data, fn d ->
      assert Day03.part1(d) == 123
    end)
  end

  test "number where symbol is not right next to it is not counted" do
    data =
      [
        """
        *....
        .....
        .123.
        .....
        """,
        """
        .*...
        .....
        .123.
        .....
        """,
        """
        ..*..
        .....
        .123.
        .....
        """,
        """
        ...*.
        .....
        .123.
        .....
        """,
        """
        ....*
        .....
        .123.
        .....
        """,
        """
        ......
        *.123.
        ......
        """,
        """
        ......
        .123.*
        ......
        """,
        """
        .....
        .123.
        .....
        *....
        """,
        """
        .....
        .123.
        .....
        .*...
        """,
        """
        .....
        .123.
        .....
        ..*..
        """,
        """
        .....
        .123.
        .....
        ...*.
        """,
        """
        ......
        .123..
        .....*
        """
      ]

    Enum.each(data, fn d ->
      assert Day03.part1(d) == 0
    end)
  end

  test "part 2 sample works" do
    data = """
    467..114..
    ...*......
    ..35..633.
    ......#...
    617*......
    .....+.58.
    ..592.....
    ......755.
    ...$.*....
    .664.598..
    """

    assert Aoc2023.Day03.part2(data) == 467*35 + 755*598
  end
end
